<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/src/assets/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="FloDrama - Votre plateforme de streaming dédiée aux dramas et films asiatiques" />
    <meta name="theme-color" content="#FF4B4B" />
    <title>FloDrama</title>
    <style>
      /* Styles de préchargement pour éviter le FOUC */
      body {
        background-color: #1A1A1A;
        color: #FFFFFF;
        font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        margin: 0;
        padding: 0;
      }
      
      .preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1A1A1A;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }
      
      .preloader-logo {
        width: 120px;
        height: 120px;
        animation: pulse 2s infinite ease-in-out;
      }
      
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div class="preloader">
        <img src="/src/assets/logo.svg" alt="FloDrama Logo" class="preloader-logo" />
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // Script pour forcer le rafraîchissement du cache
      (function() {
        // Générer un timestamp unique
        const timestamp = new Date().getTime();
        
        // Ajouter le timestamp comme paramètre à toutes les requêtes
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
          if (typeof url === 'string') {
            url = url + (url.includes('?') ? '&' : '?') + '_t=' + timestamp;
          }
          return originalFetch(url, options);
        };
        
        // Forcer le rechargement de la page si elle a été mise en cache
        if (window.performance && window.performance.navigation.type === 2) {
          window.location.reload(true);
        }
        
        console.log('Cache refresh script initialized with timestamp: ' + timestamp);
      })();
    </script>
  </body>
</html>
