import{j as s}from"./ui-components-DqEG6yq2.js";import{a,L as M}from"./vendor-Chun8WN8.js";import{n as O,y as W,m as x,o as A,z as m,i as J,v as U,t as V,r as b,E as F,G}from"./index-Utl-8Kwq.js";const B=({item:e,size:y="md",index:w=0})=>{const[N,h]=a.useState(!1),[k,u]=a.useState(!1),{isInWatchlist:p,toggleWatchlist:C}=O(),{isLiked:f,isDisliked:j,likeContent:z,dislikeContent:L}=W(),[n,g]=a.useState(!1),[l,r]=a.useState(!1),[o,c]=a.useState(!1),i=a.useRef(null);if(a.useEffect(()=>{e&&e.id&&(g(p(e.id)),r(f(e.id)),c(j(e.id)))},[e,p,f,j]),a.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),!e)return null;const P=t=>{if(t.preventDefault(),t.stopPropagation(),e){const d=C(e);g(d)}},E=t=>{t.preventDefault(),t.stopPropagation(),e&&(z(e.id),r(!l),o&&c(!1))},S=t=>{t.preventDefault(),t.stopPropagation(),e&&(L(e.id),c(!o),l&&r(!1))},v={sm:"w-32 h-48",md:"w-40 h-60",lg:"w-48 h-72"},T=()=>e.section==="dramas"?"drama":e.section==="movies"?"movie":e.section==="bollywood"?"bollywood":e.section==="anime"?"anime":"drama",D=()=>{h(!0),i.current=setTimeout(()=>{u(!0)},500)},$=()=>{h(!1),u(!1),i.current&&(clearTimeout(i.current),i.current=null)},I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,delay:w*.05,ease:"easeOut"}},hover:{scale:1.05,transition:{duration:.3,ease:"easeInOut"}}},R={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}};return s.jsx(x.div,{initial:"hidden",animate:"visible",whileHover:"hover",variants:I,onMouseEnter:D,onMouseLeave:$,className:"relative",children:s.jsxs(M,{to:`/${T()}/${e.id}`,className:"group cursor-pointer block",children:[s.jsxs("div",{className:`relative overflow-hidden rounded-lg mb-2 ${v[y]||v.md}`,children:[s.jsx("img",{src:A(e.poster),alt:e.title,className:"w-full h-full object-cover",loading:"lazy"}),s.jsx(m,{children:N&&s.jsxs(x.div,{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent flex flex-col justify-end p-3",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-bold truncate",children:e.title}),e.year&&s.jsx("p",{className:"text-xs text-gray-300",children:e.year})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{className:`p-1.5 rounded-full ${n?"bg-fuchsia-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,onClick:P,"aria-label":n?"Retirer de ma liste":"Ajouter à ma liste",children:n?s.jsx(J,{size:14}):s.jsx(U,{size:14})}),s.jsx("button",{className:"p-1.5 rounded-full bg-fuchsia-600 text-white","aria-label":"Lire",children:s.jsx(V,{size:14,fill:"white"})})]})]}),s.jsx(m,{children:k&&s.jsxs(x.div,{className:"mt-2",variants:R,initial:"hidden",animate:"visible",exit:"hidden",children:[s.jsxs("div",{className:"flex items-center text-xs space-x-2 mb-1",children:[e.rating&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(b,{size:12,className:"text-yellow-400 mr-0.5"}),s.jsx("span",{children:e.rating})]}),e.duration&&s.jsx("span",{children:e.duration}),e.year&&s.jsx("span",{children:e.year})]}),e.categories&&e.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.categories.slice(0,2).map((t,d)=>s.jsx("span",{className:"text-[10px] bg-white/20 px-1.5 py-0.5 rounded",children:t},d))}),e.description&&s.jsx("p",{className:"text-xs text-gray-300 mt-1 line-clamp-2",children:e.description}),s.jsx("div",{className:"flex justify-between mt-2",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:`p-1 ${l?"text-green-400":"text-gray-400 hover:text-white"}`,onClick:E,"aria-label":"J'aime",children:s.jsx(F,{size:14})}),s.jsx("button",{className:`p-1 ${o?"text-red-400":"text-gray-400 hover:text-white"}`,onClick:S,"aria-label":"Je n'aime pas",children:s.jsx(G,{size:14})})]})})]})})]})}),e.rating&&s.jsxs("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-1.5 py-0.5 rounded flex items-center",children:[s.jsx(b,{size:12,className:"mr-0.5"}),e.rating]}),e.episodes&&s.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-1.5 py-0.5 rounded",children:[e.latest_episode,"/",e.episodes," EP"]})]}),s.jsx("h3",{className:"font-medium text-sm truncate",children:e.title}),s.jsxs("div",{className:"flex text-xs text-gray-400 space-x-2",children:[s.jsx("span",{children:e.year}),e.categories&&e.categories.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"•"}),s.jsx("span",{children:e.categories[0]})]})]})]})})};export{B as C};
//# sourceMappingURL=ContentCard-kUGkB5zV.js.map
