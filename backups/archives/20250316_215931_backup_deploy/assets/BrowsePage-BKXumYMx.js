import{j as e}from"./ui-components-DqEG6yq2.js";import{u as Y,m as B,a as r,L as Z}from"./vendor-Chun8WN8.js";import{l as $,N as O,q as V,x as W,m as C,d as X,X as _,F as G}from"./index-IfE0Ec86.js";import{C as H}from"./ContentCard-CaRMdv-M.js";import"./player-BLuYXUgV.js";const se=()=>{const{category:d}=Y(),[c,f]=B(),{getAllItems:j,getCategories:b,getLanguages:v,getCountries:N,isLoading:x,error:m}=$(),[h,k]=r.useState([]),[u,S]=r.useState([]),[F,L]=r.useState([]),[P,z]=r.useState([]),[A,T]=r.useState([]),[o,g]=r.useState(c.get("q")||""),[a,p]=r.useState({type:c.get("type")||"all",category:d||c.get("category")||"all",language:c.get("language")||"all",country:c.get("country")||"all",year:c.get("year")||"all",sort:c.get("sort")||"popular"}),[y,E]=r.useState(!1),[I,R]=r.useState([]);r.useEffect(()=>{if(x||m)return;const s=j();k(s),L(b()),z(v()),T(N());const n=new Date().getFullYear(),t=Array.from({length:n-1999},(l,M)=>n-M);R(t)},[x,m,j,b,v,N]),r.useEffect(()=>{d&&p(s=>({...s,category:d}))},[d]),r.useEffect(()=>{if(h.length===0)return;let s=[...h];if(a.type!=="all"&&(s=s.filter(t=>t.type===a.type)),a.category!=="all"&&(s=s.filter(t=>t.categories&&t.categories.includes(a.category))),a.language!=="all"&&(s=s.filter(t=>t.language===a.language)),a.country!=="all"&&(s=s.filter(t=>t.country===a.country)),a.year!=="all"&&(s=s.filter(t=>t.year===parseInt(a.year,10))),o){const t=o.toLowerCase();s=s.filter(l=>l.title.toLowerCase().includes(t)||l.description&&l.description.toLowerCase().includes(t))}switch(a.sort){case"newest":s.sort((t,l)=>l.year-t.year);break;case"oldest":s.sort((t,l)=>t.year-l.year);break;case"rating":s.sort((t,l)=>(l.rating||0)-(t.rating||0));break;case"az":s.sort((t,l)=>t.title.localeCompare(l.title));break;case"za":s.sort((t,l)=>l.title.localeCompare(t.title));break}S(s);const n={};Object.entries(a).forEach(([t,l])=>{l!=="all"&&(n[t]=l)}),o&&(n.q=o),f(n,{replace:!0})},[h,a,o,f]);const i=(s,n)=>{p(t=>({...t,[s]:n}))},w=()=>{p({type:"all",category:"all",language:"all",country:"all",year:"all",sort:"popular"}),g("")},q=s=>{s.preventDefault()};if(x)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-white",children:"Chargement des contenus..."})]})});if(m)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 text-5xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Erreur de chargement"}),e.jsx("p",{className:"text-gray-400 mb-6",children:m}),e.jsx(Z,{to:"/",className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded font-medium",children:"Retour √† l'accueil"})]})});const D={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx(O,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(V,{animation:"fadeIn",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:d?`Cat√©gorie: ${d}`:"Parcourir les contenus"}),e.jsxs("p",{className:"text-gray-400",children:[u.length," r√©sultat",u.length!==1?"s":""]})]}),e.jsxs("button",{className:"mt-4 md:mt-0 flex items-center bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded md:hidden",onClick:()=>E(!y),children:[e.jsx(W,{size:18,className:"mr-2"}),y?"Masquer les filtres":"Afficher les filtres"]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs(C.aside,{className:`w-full md:w-64 flex-shrink-0 bg-gray-800 rounded-lg p-4 mb-6 md:mb-0 md:mr-6 ${y?"block":"hidden md:block"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtres"}),e.jsx("button",{className:"text-gray-400 hover:text-white",onClick:w,children:"R√©initialiser"})]}),e.jsx("form",{onSubmit:q,className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher...",className:"w-full bg-gray-700 text-white px-4 py-2 pl-10 rounded",value:o,onChange:s=>g(s.target.value)}),e.jsx(X,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o&&e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",onClick:()=>g(""),children:e.jsx(_,{size:16})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Type de contenu"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"all",checked:a.type==="all",onChange:()=>i("type","all"),className:"mr-2 accent-red-600"}),"Tous"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"drama",checked:a.type==="drama",onChange:()=>i("type","drama"),className:"mr-2 accent-red-600"}),"Dramas"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"movie",checked:a.type==="movie",onChange:()=>i("type","movie"),className:"mr-2 accent-red-600"}),"Films"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"bollywood",checked:a.type==="bollywood",onChange:()=>i("type","bollywood"),className:"mr-2 accent-red-600"}),"Bollywood"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"anime",checked:a.type==="anime",onChange:()=>i("type","anime"),className:"mr-2 accent-red-600"}),"Anime"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Cat√©gorie"}),e.jsxs("select",{className:"w-full bg-gray-700 text-white px-3 py-2 rounded",value:a.category,onChange:s=>i("category",s.target.value),children:[e.jsx("option",{value:"all",children:"Toutes les cat√©gories"}),F.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Langue"}),e.jsxs("select",{className:"w-full bg-gray-700 text-white px-3 py-2 rounded",value:a.language,onChange:s=>i("language",s.target.value),children:[e.jsx("option",{value:"all",children:"Toutes les langues"}),P.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Pays"}),e.jsxs("select",{className:"w-full bg-gray-700 text-white px-3 py-2 rounded",value:a.country,onChange:s=>i("country",s.target.value),children:[e.jsx("option",{value:"all",children:"Tous les pays"}),A.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Ann√©e"}),e.jsxs("select",{className:"w-full bg-gray-700 text-white px-3 py-2 rounded",value:a.year,onChange:s=>i("year",s.target.value),children:[e.jsx("option",{value:"all",children:"Toutes les ann√©es"}),I.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Trier par"}),e.jsxs("select",{className:"w-full bg-gray-700 text-white px-3 py-2 rounded",value:a.sort,onChange:s=>i("sort",s.target.value),children:[e.jsx("option",{value:"popular",children:"Popularit√©"}),e.jsx("option",{value:"newest",children:"Plus r√©cent"}),e.jsx("option",{value:"oldest",children:"Plus ancien"}),e.jsx("option",{value:"rating",children:"Note"}),e.jsx("option",{value:"az",children:"A-Z"}),e.jsx("option",{value:"za",children:"Z-A"})]})]})]}),e.jsx("div",{className:"flex-grow",children:u.length>0?e.jsx(C.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6",variants:D,initial:"hidden",animate:"visible",children:u.map((s,n)=>e.jsx(H,{item:s,size:"md",index:n},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"text-5xl mb-4",children:"üîç"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Aucun r√©sultat trouv√©"}),e.jsx("p",{className:"text-gray-400 mb-4 text-center",children:"Essayez de modifier vos filtres ou votre recherche"}),e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded font-medium",onClick:w,children:"R√©initialiser les filtres"})]})})]})]}),e.jsx(G,{})]})};export{se as default};
//# sourceMappingURL=BrowsePage-BKXumYMx.js.map
