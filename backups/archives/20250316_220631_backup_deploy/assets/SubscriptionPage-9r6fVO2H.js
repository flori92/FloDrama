import{j as e}from"./ui-components-DqEG6yq2.js";import{a as y}from"./vendor-Chun8WN8.js";import{g as i,s as v,u as w,h as A,P as C,N as z,m as b,i as M,X as k,f as L,F as D,j as F,T as R,k as U}from"./index-CX8kWcW5.js";import{S as $}from"./SubscriptionStatus-A3STrtfi.js";import{C as O}from"./calendar-8lwQznlx.js";import{M as B}from"./monitor-Bv2eSBgL.js";import"./player-BLuYXUgV.js";const P={CLIENT_ID:"YOUR_PAYPAL_CLIENT_ID",SANDBOX_MODE:!0,CURRENCY:"EUR"};class V{constructor(){this.isInitialized=!1,this.paypalInstance=null}async initializePayPalSDK(){return this.isInitialized?Promise.resolve():new Promise((d,a)=>{const s=document.createElement("script");s.src=`https://www.paypal.com/sdk/js?client-id=${P.CLIENT_ID}&currency=${P.CURRENCY}`,s.async=!0,s.onload=()=>{this.isInitialized=!0,this.paypalInstance=window.paypal,d()},s.onerror=o=>{a(new Error("Impossible de charger le SDK PayPal"))},document.body.appendChild(s)})}async createSubscriptionButton(d,a,s,o,h,j){try{await this.initializePayPalSDK();const n=Object.values(i).find(c=>c.id===a);if(!n)throw new Error(`Plan d'abonnement invalide: ${a}`);const m=s==="yearly"?n.yearlyPrice:n.monthlyPrice;this.paypalInstance.Buttons({style:{shape:"rect",color:"blue",layout:"vertical",label:"subscribe"},createOrder:(c,u)=>u.order.create({purchase_units:[{amount:{value:m.toFixed(2),currency_code:P.CURRENCY},description:`Abonnement FloDrama - ${n.name} (${s==="yearly"?"Annuel":"Mensuel"})`}]}),onApprove:(c,u)=>u.order.capture().then(p=>{const f={id:p.id,type:"paypal",email:p.payer.email_address,isDefault:!0};v.subscribe(a,f),o&&o(p)}),onError:c=>{console.error("Erreur PayPal:",c),h&&h(c)},onCancel:c=>{j&&j(c)}}).render(`#${d}`)}catch(n){console.error("Erreur lors de la création du bouton PayPal:",n),h&&h(n)}}async cancelSubscription(d){return new Promise(a=>{setTimeout(()=>{v.cancelSubscription(),a({success:!0})},1e3)})}async updateSubscription(d,a){return new Promise(s=>{setTimeout(()=>{v.changePlan(a),s({success:!0})},1e3)})}}const _=new V,q=({planId:l,billingPeriod:d,onSuccess:a,onError:s,onCancel:o,className:h})=>{const j=y.useRef(null),[n,m]=y.useState(!0),[c,u]=y.useState(null),{subscribe:p}=w(),f=`paypal-button-${l}-${d}`;return y.useEffect(()=>((async()=>{try{m(!0),await _.createSubscriptionButton(f,l,d,r=>{const N={id:r.id,type:"paypal",email:r.payer.email_address,isDefault:!0};p(l,N),a&&a(r)},r=>{u(r.message||"Une erreur est survenue lors du paiement"),s&&s(r)},r=>{o&&o(r)}),m(!1)}catch(r){console.error("Erreur lors de l'initialisation du bouton PayPal:",r),u(r.message||"Impossible de charger le bouton PayPal"),m(!1),s&&s(r)}})(),()=>{}),[l,d,a,s,o,p,f]),e.jsxs("div",{className:h,children:[n&&e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-pink-500"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Chargement du paiement..."})]}),c&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Erreur : "}),e.jsx("span",{className:"block sm:inline",children:c})]}),e.jsx("div",{id:f,ref:j,className:n?"hidden":""})]})},W=()=>{const[l,d]=y.useState("monthly"),[a,s]=y.useState(!1),[o,h]=y.useState(null),[j,n]=y.useState(!1),{subscriptionData:m,startInitialTrial:c,isInInitialTrial:u,hasActiveSubscription:p}=w();y.useEffect(()=>{m&&(m.status,A.INACTIVE)},[m]);const f=[{id:i.ESSENTIAL.id,name:i.ESSENTIAL.name,description:i.ESSENTIAL.description,monthlyPrice:i.ESSENTIAL.monthlyPrice,yearlyPrice:i.ESSENTIAL.yearlyPrice,features:[{text:"Accès à tous les dramas",included:!0},{text:"Qualité HD",included:!0},{text:"Visionnage sur 1 écran à la fois",included:!0},{text:"Sans publicité",included:!1},{text:"Accès anticipé aux nouveautés",included:!1}],color:"bg-blue-500",popular:!1},{id:i.PREMIUM.id,name:i.PREMIUM.name,description:i.PREMIUM.description,monthlyPrice:i.PREMIUM.monthlyPrice,yearlyPrice:i.PREMIUM.yearlyPrice,features:[{text:"Accès à tous les dramas",included:!0},{text:"Qualité Full HD",included:!0},{text:"Visionnage sur 2 écrans à la fois",included:!0},{text:"Sans publicité",included:!0},{text:"Accès anticipé aux nouveautés",included:!1}],color:"bg-pink-500",popular:!0},{id:i.ULTIMATE.id,name:i.ULTIMATE.name,description:i.ULTIMATE.description,monthlyPrice:i.ULTIMATE.monthlyPrice,yearlyPrice:i.ULTIMATE.yearlyPrice,features:[{text:"Accès à tous les dramas",included:!0},{text:"Qualité 4K + HDR",included:!0},{text:"Visionnage sur 4 écrans à la fois",included:!0},{text:"Sans publicité",included:!0},{text:"Accès anticipé aux nouveautés",included:!0}],color:"bg-purple-500",popular:!1}],S=[{name:"Smartphone",icon:e.jsx(F,{size:24})},{name:"Tablette",icon:e.jsx(R,{size:24})},{name:"Ordinateur",icon:e.jsx(B,{size:24})},{name:"Smart TV",icon:e.jsx(U,{size:24})}],r=[{question:"Puis-je annuler mon abonnement à tout moment ?",answer:"Oui, vous pouvez annuler votre abonnement à tout moment. L'annulation prendra effet à la fin de votre période de facturation en cours."},{question:"Comment puis-je payer mon abonnement ?",answer:"Nous acceptons les paiements par carte bancaire (Visa, Mastercard, American Express) et PayPal."},{question:"Puis-je changer de formule d'abonnement ?",answer:"Oui, vous pouvez passer à une formule supérieure à tout moment. Le changement prendra effet immédiatement et nous ajusterons votre facturation au prorata."},{question:"Y a-t-il une période d'essai gratuite ?",answer:"Oui ! Après l'inscription sur FloDrama, vous avez droit à 7 jours gratuits de visionnage. Après cette période, vous devez souscrire à un abonnement. Une fois l'abonnement effectué, vous bénéficiez d'un mois supplémentaire gratuit avant le premier prélèvement."},{question:"FloDrama est-il disponible dans mon pays ?",answer:"FloDrama est actuellement disponible dans plus de 190 pays à travers le monde. Veuillez vérifier la disponibilité dans votre région sur notre page de support."}],N=()=>{c()},I=t=>{h(t),n(!0),setTimeout(()=>{var x;(x=document.getElementById("payment-options"))==null||x.scrollIntoView({behavior:"smooth"})},100)},E=t=>{s(!0),n(!1),setTimeout(()=>{var x;(x=document.getElementById("success-message"))==null||x.scrollIntoView({behavior:"smooth"})},100)};return e.jsx(C,{type:"fade",children:e.jsxs("div",{className:"bg-gray-900 text-white min-h-screen",children:[e.jsx(z,{}),e.jsx("div",{className:"container mx-auto px-4 py-12 pt-24",children:e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto",children:[e.jsx($,{className:"mb-12"}),a&&e.jsxs(b.div,{id:"success-message",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-12 rounded",children:[e.jsx("p",{className:"font-bold",children:"Félicitations !"}),e.jsx("p",{children:"Votre abonnement a été activé avec succès. Vous bénéficiez maintenant d'un mois gratuit supplémentaire. Votre premier prélèvement sera effectué dans un mois."}),e.jsx("p",{className:"mt-2",children:"Profitez dès maintenant de tout le contenu premium de FloDrama !"})]}),!p()&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Choisissez votre abonnement"}),e.jsx("p",{className:"text-xl text-gray-400 mb-12 text-center",children:"Accédez à des milliers de dramas et films asiatiques en streaming illimité"}),e.jsx("div",{className:"flex justify-center mb-12",children:e.jsxs("div",{className:"bg-gray-800 p-1 rounded-full inline-flex",children:[e.jsx("button",{className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${l==="monthly"?"bg-pink-500 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>d("monthly"),children:"Mensuel"}),e.jsxs("button",{className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${l==="yearly"?"bg-pink-500 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>d("yearly"),children:["Annuel ",e.jsx("span",{className:"text-xs font-bold text-pink-300",children:"Économisez jusqu'à 4€"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:f.map((t,x)=>e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:x*.1},className:`bg-gray-800 rounded-xl overflow-hidden shadow-lg ${t.popular?"ring-2 ring-pink-500 transform md:-translate-y-4":""}`,children:[t.popular&&e.jsx("div",{className:"bg-pink-500 text-white text-center py-1 text-sm font-medium",children:"Le plus populaire"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-gray-400 mb-6",children:t.description}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-4xl font-bold",children:l==="monthly"?`${t.monthlyPrice.toFixed(2)}€`:`${t.yearlyPrice.toFixed(2)}€`}),e.jsx("span",{className:"text-gray-400 ml-2 mb-1",children:l==="monthly"?"/mois":"/an"})]}),l==="yearly"&&e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Soit ",(t.yearlyPrice/12).toFixed(2),"€ par mois"]})]}),e.jsx("button",{className:`w-full py-3 rounded-lg font-medium transition-colors ${t.popular?"bg-pink-500 hover:bg-pink-600 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}`,onClick:()=>I(t),children:u()?"S'abonner maintenant":"Commencer l'essai gratuit"}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Ce qui est inclus :"}),e.jsx("ul",{className:"space-y-3",children:t.features.map((g,T)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:`flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center mr-3 mt-0.5 ${g.included?`${t.color}`:"bg-gray-700"}`,children:g.included?e.jsx(M,{size:12,className:"text-white"}):e.jsx(k,{size:12,className:"text-gray-400"})}),e.jsx("span",{className:g.included?"text-white":"text-gray-500",children:g.text})]},T))})]})]})]},t.name))})]}),j&&o&&e.jsxs(b.div,{id:"payment-options",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gray-800 rounded-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Finaliser votre abonnement"}),e.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:o.name}),e.jsx("p",{className:"text-gray-400",children:l==="monthly"?`${o.monthlyPrice.toFixed(2)}€/mois`:`${o.yearlyPrice.toFixed(2)}€/an`})]}),e.jsx("button",{className:"text-pink-500 hover:text-pink-400",onClick:()=>n(!1),children:"Modifier"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Choisissez votre moyen de paiement"}),e.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-gray-300 mb-2",children:[e.jsx("strong",{children:"Important :"})," En vous abonnant aujourd'hui, vous bénéficiez d'un mois gratuit supplémentaire. Votre premier prélèvement sera effectué dans un mois."]})}),e.jsx(q,{planId:o.id,billingPeriod:l,onSuccess:E,onError:t=>console.error("Erreur PayPal:",t),onCancel:()=>console.log("Paiement annulé"),className:"mb-4"})]})]}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-gray-800 rounded-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Regardez sur tous vos appareils"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:S.map(t=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-gray-700 w-16 h-16 rounded-full flex items-center justify-center mb-3",children:t.icon}),e.jsx("span",{children:t.name})]},t.name))})]}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-gray-800 rounded-xl p-8 mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Moyens de paiement acceptés"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{size:24,className:"mr-2"}),e.jsx("span",{children:"Carte bancaire"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-bold text-blue-500 mr-2",children:"Pay"}),e.jsx("span",{children:"PayPal"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{size:24,className:"mr-2"}),e.jsx("span",{children:"Facturation mensuelle ou annuelle"})]})]})]}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Questions fréquentes"}),e.jsx("div",{className:"space-y-6",children:r.map((t,x)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:t.question}),e.jsx("p",{className:"text-gray-400",children:t.answer})]},x))})]}),!p()&&!a&&!u()&&e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à découvrir FloDrama ?"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Essai gratuit de 7 jours, annulable à tout moment"}),e.jsx("button",{className:"bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-lg font-medium text-lg transition-colors",onClick:N,children:"Commencer mon essai gratuit"})]})]})}),e.jsx(D,{})]})})};export{W as default};
//# sourceMappingURL=SubscriptionPage-9r6fVO2H.js.map
